<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 APIs | Effective Data Science</title>
<meta name="author" content="Zak Varty">
<meta name="description" content="Effective Data Science is still a work-in-progress. This chapter is currently a dumping ground for ideas, and we don’t recommend reading it. If you would like to contribute to the development of...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 7 APIs | Effective Data Science">
<meta property="og:type" content="book">
<meta property="og:url" content="https://eds-book.zakvarty.com/data-apis.html">
<meta property="og:image" content="https://eds-book.zakvarty.com/images/EDS-logo.jpg">
<meta property="og:description" content="Effective Data Science is still a work-in-progress. This chapter is currently a dumping ground for ideas, and we don’t recommend reading it. If you would like to contribute to the development of...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 APIs | Effective Data Science">
<meta name="twitter:description" content="Effective Data Science is still a work-in-progress. This chapter is currently a dumping ground for ideas, and we don’t recommend reading it. If you would like to contribute to the development of...">
<meta name="twitter:image" content="https://eds-book.zakvarty.com/images/EDS-logo.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Effective Data Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About this Course</a></li>
<li class="book-part">Effective Data Science Workflows</li>
<li><a class="" href="workflows-introduction.html">Introduction</a></li>
<li><a class="" href="workflows-organising-your-work.html"><span class="header-section-number">2</span> Organising your work</a></li>
<li><a class="" href="workflows-naming.html"><span class="header-section-number">3</span> Naming Files</a></li>
<li><a class="" href="workflows-code.html"><span class="header-section-number">4</span> Code</a></li>
<li><a class="" href="workflows-checklist.html">Checklist</a></li>
<li class="book-part">Acquiring and Sharing Data</li>
<li><a class="" href="data-introduction.html">Introduction</a></li>
<li><a class="" href="data-tabular.html"><span class="header-section-number">5</span> Tabular Data</a></li>
<li><a class="" href="data-webscraping.html"><span class="header-section-number">6</span> Web Scraping</a></li>
<li><a class="active" href="data-apis.html"><span class="header-section-number">7</span> APIs</a></li>
<li><a class="" href="data-checklist.html">Checklist</a></li>
<li class="book-part">Data Exploration and Visualisation</li>
<li><a class="" href="edav-introduction.html">Introduction</a></li>
<li><a class="" href="edav-wrangling.html"><span class="header-section-number">9</span> Data Wrangling</a></li>
<li><a class="" href="edav-analysis.html"><span class="header-section-number">10</span> Exploratory Data Analysis</a></li>
<li><a class="" href="edav-visualisation.html"><span class="header-section-number">11</span> Data Visualisation</a></li>
<li><a class="" href="edav-checklist.html">Checklist</a></li>
<li class="book-part">Preparing for Production</li>
<li><a class="" href="production-introduction.html">Introduction</a></li>
<li><a class="" href="production-reproducibility.html"><span class="header-section-number">12</span> Reproducibility</a></li>
<li><a class="" href="production-explainability.html"><span class="header-section-number">13</span> Explainability</a></li>
<li><a class="" href="production-scalability.html"><span class="header-section-number">14</span> Scalability</a></li>
<li><a class="" href="production-checklist.html">Checklist</a></li>
<li class="book-part">Data Science Ethics</li>
<li><a class="" href="ethics-introduction.html">Introduction</a></li>
<li><a class="" href="ethics-privacy.html"><span class="header-section-number">16</span> Privacy</a></li>
<li><a class="" href="ethics-fairness.html"><span class="header-section-number">17</span> Fairness</a></li>
<li><a class="" href="ethics-conduct.html"><span class="header-section-number">18</span> Codes of Conduct</a></li>
<li><a class="" href="ethics-checklist.html">Checklist</a></li>
<li><a class="" href="reading-list.html"><span class="header-section-number">19</span> Reading List</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/zakvarty/data_science_notes/">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-apis" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> APIs<a class="anchor" aria-label="anchor" href="#data-apis"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdimportant">
<p>Effective Data Science is still a work-in-progress. This chapter is currently a dumping ground for ideas, and we don’t recommend reading it.</p>
<p>If you would like to contribute to the development of EDS, you may do so at <a href="https://github.com/zakvarty/data_science_notes" class="uri">https://github.com/zakvarty/data_science_notes</a>.</p>
</div>
<div id="aquiring-data-via-an-api" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Aquiring Data Via an API<a class="anchor" aria-label="anchor" href="#aquiring-data-via-an-api"><i class="fas fa-link"></i></a>
</h2>
<div class="medium_right">
<div class="inline-figure"><img style="border-radius: 10%;" src="images/203-data-apis/apis-and-httr.png" alt="The text APIs and httr, written on a black hexagon."></div>
</div>
<p>We’ve already established that you can’t always rely on tidy, tabular data to land on your desk.</p>
<p>Sometimes you are going to have to go out and gather data for yourself. We have already seen how to scrape information directly from the HTML source of a webpage. But surely there has to be an easer way. Thankfully, there often is!</p>
<p>In this chapter we will cover the basics of obtaining data via an API. This material draws together the <a href="https://zapier.com/learn/apis/">Introduction to APIs</a> book by Brian Cooksey and the <a href="https://stat545.com/diy-web-data.html#interacting-with-an-api">DIY web data</a> section of STAT545 at the University of British Columbia.</p>
</div>
<div id="why-do-i-need-to-know-about-apis" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Why do I need to know about APIs?<a class="anchor" aria-label="anchor" href="#why-do-i-need-to-know-about-apis"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>An API, or application programming interface, is a set of rules that allows different software applications to communicate with each other.</p>
</blockquote>
<p>As a data scientist, you will often need to access data that is stored on remote servers or in cloud-based services. APIs provide a convenient way for data scientists to programmatically retrieve this data, without having to manually download data sets or and process them locally on their own computer.</p>
<p>This has multiple benefits including automation and standardisation of data sharing.</p>
<ul>
<li><p><strong>Automation:</strong> It is much faster for a machine to process a data request than a human. Having a machine handling data requests also scales much better as either the number or the complexity of data requests grows. Additionally, there is a lower risk of introducing human error. For example, a human might accidentally share the wrong data, which can have serious legal repercussions.</p></li>
<li><p><strong>Standardisation:</strong> Having a machine process data requests requires the format of these requests and the associated responses to be standardised. This allows data sharing and retrieval to become a reproducible and programmatic aspect of our work.</p></li>
</ul>
</div>
<div id="what-is-an-api" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> What is an API?<a class="anchor" aria-label="anchor" href="#what-is-an-api"><i class="fas fa-link"></i></a>
</h2>
<p>So then, if APIs are so great, what exactly are they?</p>
<p>In human-to-human communication, the set of rules governing acceptable behaviour is known as etiquette. Depending on when or where you live, social etiquette can be rather strict. The rules for computer-to-computer communication take this to a whole new level, because with machines there can be no room left for interpretation.</p>
<p>The set of rules governing interactions between computers or programmes is known as a <strong>protocol</strong>.</p>
<p>APIs provide a standard protocol for different programs to interact with one another. This makes it easier for developers to build complex systems by leveraging the functionality of existing services and platforms. The benefits of working in a standardised and modular way apply equally well to sharing data as they do to writing code or organising files.</p>
<p>There are two sides to communication and when <em>machines</em> communicate these are known as the <strong>server</strong> and the <strong>client</strong>.</p>
<div class="medium_right">
<div class="inline-figure"><img style="border-radius: 10%;" src="images/203-data-apis/server-schematic.png" alt="Schematic diagram representing a computer server. Text above reads 'Servers: don't fear a computer with no screen'."></div>
</div>
<p>Servers can seem intimidating, because unlike your laptop or mobile phone they don’t have their own input and output devices; they have no keyboard, no monitor, and no a mouse. Despite this, servers are just regular computers that are designed to store data and run programmes. Servers don’t have their own input or output devices because they are intended to be used <em>remotely</em>, via another computer. There is no need for a screen or a mouse if the user is miles away. Nothing scary going on here!</p>
<p>People often find clients much less intimidating - they are simply any other computer or application that might contact the sever.</p>
</div>
<div id="http" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> HTTP<a class="anchor" aria-label="anchor" href="#http"><i class="fas fa-link"></i></a>
</h2>
<p>This leads us one step further down the rabbit-hole. An API is a protocol that defines the rules of how applications communicate with one another. But how does this communication happen?</p>
<p>HTTP (Hypertext Transfer Protocol) is the dominant mode communication on the World Wide Web. You can see the secure version of HTTP, HTTPS, at the start of most web addresses up at the top of your browser. For example:</p>
<pre class="http"><code>https://www.zakvarty.com/blog</code></pre>
<p>HTTP is the foundation of data communication on the web and is used to transfer files (such as text, images, and videos) between web servers and clients.</p>
<div class="medium_left">
<div class="inline-figure"><img style="border-radius: 10%;" src="images/203-data-apis/request-response.png" alt="Schematic diagram showing a request being sent from a client to a server, which returns a response."></div>
</div>
<p>To understand HTTP communications, I find it helpful to imagine the client and the server as being a customer and a waiter at a restaurant. The client makes some request to the server, which then tries to comply before giving a response. The server might respond to confirm that the request was completed successfully. Alternatively, the server might respond with an error message, which is (hopefully) informative about why the request could not be completed.</p>
<p>This request-response model is the basis for HTTP, the communication system used by the majority of APIs.</p>
</div>
<div id="http-requests" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> HTTP Requests<a class="anchor" aria-label="anchor" href="#http-requests"><i class="fas fa-link"></i></a>
</h2>
<p>An HTTP request consists of:</p>
<ul>
<li>Uniform Resource Locator (URL) [unique identifier for a thing]</li>
<li>Method [tells server the type of action requested by client]</li>
<li>Headers [meta-information about request, e.g. device type]</li>
<li>Body [Data the client wants to send to the server]</li>
</ul>
<div class="medium_right">
<div class="inline-figure"><img style="border-radius: 10%;" src="images/203-data-apis/http-request.png" alt="Schematic diagram showing the structure of an HTTP request, composed of: a URL, method, headers and body."></div>
</div>
<div id="url" class="section level3" number="7.5.1">
<h3>
<span class="header-section-number">7.5.1</span> URL<a class="anchor" aria-label="anchor" href="#url"><i class="fas fa-link"></i></a>
</h3>
<p>The URL in a HTTP request specifies where that request is going to be made, for example <code>http://example.com</code>.</p>
</div>
<div id="method" class="section level3" number="7.5.2">
<h3>
<span class="header-section-number">7.5.2</span> Method<a class="anchor" aria-label="anchor" href="#method"><i class="fas fa-link"></i></a>
</h3>
<p>The action that the client wants to take is indicated by a set of well-defined methods or HTTP verbs. The most common HTTP verbs are <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code>.</p>
<p>The <code>GET</code> verb is used to retrieve a resource from the server, such as a web page or an image. The <code>POST</code> verb is used to send data to the server, such as when submitting a form or uploading a file. The <code>PUT</code> verb is used to replace a resource on the server with a new one, while the <code>PATCH</code> verb is used to update a resource on the server without replacing it entirely. Finally, the <code>DELETE</code> verb is used to delete a resource from the server.</p>
<p>In addition to these common HTTP verbs, there are also several less frequently used verbs. These are used for specialized purposes, such as requesting only the headers of a resource, or testing the connectivity between the client and the server.</p>
</div>
<div id="header" class="section level3" number="7.5.3">
<h3>
<span class="header-section-number">7.5.3</span> Header<a class="anchor" aria-label="anchor" href="#header"><i class="fas fa-link"></i></a>
</h3>
<p>The request headers contain meta-information about the request. This is where information about the device type would be included within the request.</p>
</div>
<div id="body" class="section level3" number="7.5.4">
<h3>
<span class="header-section-number">7.5.4</span> Body<a class="anchor" aria-label="anchor" href="#body"><i class="fas fa-link"></i></a>
</h3>
<p>Finally, the body of the request contains the data that the client is providing to the server.</p>
</div>
</div>
<div id="http-responses" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> HTTP Responses<a class="anchor" aria-label="anchor" href="#http-responses"><i class="fas fa-link"></i></a>
</h2>
<p>When the server receives a request it will attempt to fulfil it and then send a response back to the client.</p>
<div class="medium_left">
<div class="inline-figure"><img style="border-radius: 10%;" src="images/203-data-apis/http-response.png" alt="Schematic diagram showing the structure of an HTTP response, composed of: a status code, headers and body."></div>
</div>
<p>A response has a similar structure to a request apart from:</p>
<ul>
<li>responses <strong>do not have</strong> a URL,</li>
<li>responses <strong>do not have</strong> a method,</li>
<li>responses <strong>have</strong> a status code.</li>
</ul>
<div id="status-codes" class="section level3" number="7.6.1">
<h3>
<span class="header-section-number">7.6.1</span> Status Codes<a class="anchor" aria-label="anchor" href="#status-codes"><i class="fas fa-link"></i></a>
</h3>
<p>The status code is a 3 digit number, each of which has a specific meaning. Some common error codes that you might (already have) come across are:</p>
<ul>
<li>200: Success,</li>
<li>404: Page not found (all 400s are errors),</li>
<li>503: Page down.</li>
</ul>
<p>In a data science context, a successful response will return the requested data within the data field. This will most likely be given in JSON or XML format.</p>
</div>
</div>
<div id="authentication" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> Authentication<a class="anchor" aria-label="anchor" href="#authentication"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we know <em>how</em> applications communicate, you might ask how we can control who has access to the API and what types of request they can make. This can be done by the server setting appropriate permissions for each client. But then how does the server verify that the client is really who is claims to be?</p>
<p><strong>Authentication</strong> is a way to ensure that only authorized clients are able to access an API. This is typically done by the server requiring each client to provide some secret information that uniquely identifies them, whenever they make requests to the API. This information allows the API server to validate the authenticity this user before it authorises the request.</p>
<div id="basic-authentication" class="section level3" number="7.7.1">
<h3>
<span class="header-section-number">7.7.1</span> Basic Authentication<a class="anchor" aria-label="anchor" href="#basic-authentication"><i class="fas fa-link"></i></a>
</h3>
<p>There are various ways to implement API authentication.</p>
<p>Basic authentication involves each legitimate client having a username and password. An encrypted version of these is included in the <code>Authorization</code> header of the HTTP request. If the hear matches with the server’s records then the request is processed. If not, then a special status code (401) is returned to the client.</p>
<p>Basic authentication is dangerous because it does not put any restrictions on what a client can do once they are authorised. Additional, individualised restrictions can be added by using an alternative authentication scheme.</p>
</div>
<div id="api-key-authentication" class="section level3" number="7.7.2">
<h3>
<span class="header-section-number">7.7.2</span> API Key Authentication<a class="anchor" aria-label="anchor" href="#api-key-authentication"><i class="fas fa-link"></i></a>
</h3>
<p>An API key is long, random string of letters and numbers that is assigned to each authorised user. An API key is distinct from the user’s password and keys are typically issued by the service that provides an API. Using keys rather than basic authentication allows the API provider to track and limit the usage of their API.</p>
<p>For example, a provider may issue a unique API key to each developer or organization that wants to use the API. The provider can then limit access to certain data. They could also limit the number of requests that each key can make in a given time period or prevent access to certain administrative functions, like changing passwords or deleting accounts.</p>
<p>Unlike Basic Authentication, there is no standard way of a client sharing a key with the server. Depending on the API this might be in the <code>Authorization</code> field of the header, at the end of the URL (<code>http://example.com?api_key=my_secret_key</code>), or within the body of the data.</p>
</div>
</div>
<div id="api-wrappers" class="section level2" number="7.8">
<h2>
<span class="header-section-number">7.8</span> API wrappers<a class="anchor" aria-label="anchor" href="#api-wrappers"><i class="fas fa-link"></i></a>
</h2>
<p>We’ve learned a lot about how the internet works. Fortunately, a lot of the time we won’t have to worry about all of that new information other than for debugging purposes.</p>
<p>In the best case scenario, a very kind developer has written a “wrapper” function for the API. These wrappers are functions in R that will construct the HTTP request for you. If you are particularly lucky, the API wrapper will also format the response for you, converting it from XML or JSON back into an R object that is ready for immediate use.</p>
</div>
<div id="geonames-wrapper" class="section level2" number="7.9">
<h2>
<span class="header-section-number">7.9</span> <code>{geonames}</code> wrapper<a class="anchor" aria-label="anchor" href="#geonames-wrapper"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://ropensci.org/">rOpenSci</a> has a curated list of many wrappers for accessing scientific data using R. We will focus on the <a href="https://www.geonames.org/">GeoNames API</a>, which gives open access to a geographical database. To access this data, we will use wrapper functions provided by the <code>{geonames}</code> <a href="https://docs.ropensci.org/geonames/">package</a>.</p>
<p>The aim here is to illustrate the important steps of getting started with a new API.</p>
<div id="set-up" class="section level3" number="7.9.1">
<h3>
<span class="header-section-number">7.9.1</span> Set up<a class="anchor" aria-label="anchor" href="#set-up"><i class="fas fa-link"></i></a>
</h3>
<p>Before we can get any data from the GeoNames API, we first need to do a little bit of set up.</p>
<ol style="list-style-type: decimal">
<li>Install and load <code>{geonames}</code> from CRAN</li>
</ol>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("geonames")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">geonames</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Create a <a href="https://www.geonames.org/login">user account</a> for the GeoNames API</li>
</ol>
<div class="inline-figure"><img style="border-radius: 0%;" src="images/203-data-apis/sign-up.png" alt="Screenshot of the GeoNames login page. Example text has been added in the fields to create a new user account."></div>
<ol start="3" style="list-style-type: decimal">
<li>Activate the account (see activation email)</li>
</ol>
<div class="inline-figure"><img style="border-radius: 0%;" src="images/203-data-apis/confirmation-email.png" alt="Screenshot of the GeoNames confirmation email, which gives a link to click in order to confirm the new account."></div>
<ol start="4" style="list-style-type: decimal">
<li><p>Enable the free web services for your GeoNames account by logging in at this <a href="http://www.geonames.org/enablefreewebservice">link</a>.</p></li>
<li><p>Tell R your credentials for GeoNames.</p></li>
</ol>
<div class="rmdwarning">
<p>We could use the following code to tell R our credentials, but we absolutely should not.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>geonamesUsername<span class="op">=</span><span class="st">"example_username"</span><span class="op">)</span></span></code></pre></div>
<p>This would save our username as an environment variable, but it <em>also</em> puts our API credentials directly into the script. If we share the script with others (internally, externally or publicly) we would be sharing our credentials too. Not good!</p>
</div>
</div>
<div id="keep-it-secret-keep-it-safe" class="section level3" number="7.9.2">
<h3>
<span class="header-section-number">7.9.2</span> Keep it Secret, Keep it Safe<a class="anchor" aria-label="anchor" href="#keep-it-secret-keep-it-safe"><i class="fas fa-link"></i></a>
</h3>
<p>The solution to this problem is to add our credentials as environment variables in our <code>.Rprofile</code> rather than in this script. The <code>.Rprofile</code> is an R script that is run at the start of every session. IT can be created and edited directly, but can also be created and edited from within R.</p>
<p>To make/open your <code>.Rprofile</code> use the <code><a href="https://usethis.r-lib.org/reference/edit.html">edit_r_profile()</a></code> function from the <a href="https://usethis.r-lib.org">usethis</a> package.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html">edit_r_profile</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Within this file, add <code>options(geonamesUsername="example_username")</code> on a new line, remembering to replace <code>example_username</code> with your own GeoNames username.</p>
<p>The final step is to <strong>check this this file ends with a blank line</strong>, save it and restart R. Then we are all set to start using <code>{geonames}</code>.</p>
<p>This set up procedure is indicative of most API wrappers, but of course the details will vary between each API. This is why good documentation is important!</p>
</div>
<div id="using-geonames" class="section level3" number="7.9.3">
<h3>
<span class="header-section-number">7.9.3</span> Using <code>{geonames}</code><a class="anchor" aria-label="anchor" href="#using-geonames"><i class="fas fa-link"></i></a>
</h3>
<p>GeoNames has a whole host of <a href="http://www.geonames.org/export/ws-overview.html">different geo-datasets</a> that you can explore.
As a first example, let’s get all of the geo-tagged wikipedia articles that are within 1km of Imperial College London.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">imperial_coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="fl">51.49876</span>, lon <span class="op">=</span> <span class="op">-</span><span class="fl">0.1749</span><span class="op">)</span></span>
<span><span class="va">search_radius_km</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="va">imperial_neighbours</span> <span class="op">&lt;-</span> <span class="fu">geonames</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/geonames/man/GNfindNearbyWikipedia.html">GNfindNearbyWikipedia</a></span><span class="op">(</span></span>
<span>  lat <span class="op">=</span> <span class="va">imperial_coords</span><span class="op">$</span><span class="va">lat</span>,</span>
<span>  lng <span class="op">=</span> <span class="va">imperial_coords</span><span class="op">$</span><span class="va">lon</span>, </span>
<span>  radius <span class="op">=</span> <span class="va">search_radius_km</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"en"</span>,                <span class="co"># english language articles</span></span>
<span>  maxRows <span class="op">=</span> <span class="fl">500</span>              <span class="co"># maximum number of results to return </span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Looking at the structure of <code>imperial_neighbours</code> we can see that it is a data frame with one row per geo-tagged wikipedia article.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">imperial_neighbours</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    204 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ summary     : chr  "The Department of Mechanical Engineering is responsible for teaching and research in mechanical engineering at "| __truncated__ "Imperial College Business School is a global business school located in London. The business school was opened "| __truncated__ "Exhibition Road is a street in South Kensington, London which is home to several major museums and academic est"| __truncated__ "Imperial College School of Medicine (ICSM) is the medical school of Imperial College London in England, and one"| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ elevation   : chr  "20" "18" "19" "24" ...</span></span>
<span><span class="co">#&gt;  $ feature     : chr  "edu" "edu" "landmark" "edu" ...</span></span>
<span><span class="co">#&gt;  $ lng         : chr  "-0.1746" "-0.1748" "-0.17425" "-0.1757" ...</span></span>
<span><span class="co">#&gt;  $ distance    : chr  "0.0335" "0.0494" "0.0508" "0.0558" ...</span></span>
<span><span class="co">#&gt;  $ rank        : chr  "81" "91" "90" "96" ...</span></span>
<span><span class="co">#&gt;  $ lang        : chr  "en" "en" "en" "en" ...</span></span>
<span><span class="co">#&gt;  $ title       : chr  "Department of Mechanical Engineering, Imperial College London" "Imperial College Business School" "Exhibition Road" "Imperial College School of Medicine" ...</span></span>
<span><span class="co">#&gt;  $ lat         : chr  "51.498524" "51.4992" "51.4989722222222" "51.4987" ...</span></span>
<span><span class="co">#&gt;  $ wikipediaUrl: chr  "en.wikipedia.org/wiki/Department_of_Mechanical_Engineering%2C_Imperial_College_London" "en.wikipedia.org/wiki/Imperial_College_Business_School" "en.wikipedia.org/wiki/Exhibition_Road" "en.wikipedia.org/wiki/Imperial_College_School_of_Medicine" ...</span></span>
<span><span class="co">#&gt;  $ countryCode : chr  NA "AE" NA "GB" ...</span></span>
<span><span class="co">#&gt;  $ thumbnailImg: chr  NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ geoNameId   : chr  NA NA NA NA ...</span></span></code></pre></div>
<p>To confirm we have the correct location we can inspect the title of the first five neighbours.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">imperial_neighbours</span><span class="op">$</span><span class="va">title</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "Department of Mechanical Engineering, Imperial College London"             </span></span>
<span><span class="co">#&gt; [2] "Imperial College Business School"                                          </span></span>
<span><span class="co">#&gt; [3] "Exhibition Road"                                                           </span></span>
<span><span class="co">#&gt; [4] "Imperial College School of Medicine"                                       </span></span>
<span><span class="co">#&gt; [5] "Department of Civil and Environmental Engineering, Imperial College London"</span></span></code></pre></div>
<p>Nothing too surprising here, mainly departments of the college and Exhibition Road, which runs along one side of the campus. These sorts of check are important - I initially forgot the minus in the longitude and was getting results in East London!</p>
</div>
</div>
<div id="what-if-there-is-no-wrapper" class="section level2" number="7.10">
<h2>
<span class="header-section-number">7.10</span> What if there is no wrapper?<a class="anchor" aria-label="anchor" href="#what-if-there-is-no-wrapper"><i class="fas fa-link"></i></a>
</h2>
<p>If there is not a wrapper function, we can still access APIs fairly easilty using the <a href="https://httr.r-lib.org/">httr</a> package.</p>
<p>We will look at an example using <a href="http://www.omdbapi.com/">OMDb</a>, which is an open source version of <a href="https://www.imdb.com/">IMDb</a>, to get information about the movie Mean Girls.</p>
<p>To use the OMDB API you will once again need to <a href="http://www.omdbapi.com/apikey.aspx">request a free API key</a>, follow a verification link and add your API key to your <code>.Rprofile</code>.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add this to .Rprofile, pasting in your own API key</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>OMDB_API_Key <span class="op">=</span> <span class="st">"PASTE YOUR KEY HERE"</span><span class="op">)</span></span></code></pre></div>
<p>You can then restart R and safely access your API key from within your R session.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load your API key into the current R session,</span></span>
<span><span class="va">ombd_api_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">"OMDB_API_Key"</span><span class="op">)</span></span></code></pre></div>
<p>Using the documentation for the API, requests have URLs of the following form, where terms in angular brackets should be replaced by you.</p>
<pre><code>http://www.omdbapi.com/?t=&lt;TITLE&gt;&amp;y=&lt;YEAR&gt;&amp;plot=&lt;LENGTH&gt;&amp;r=&lt;FORMAT&gt;&amp;apikey=&lt;API_KEY&gt;</code></pre>
<p>With a little bit of effort, we can write a function that composes this type of request URL for us. We will using the <a href="https://github.com/tidyverse/glue">glue</a> package to help us join strings together.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#' Compose search requests for the OMBD API</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param title String defining title to search for. Words are separated by "+".</span></span>
<span><span class="co">#' @param year String defining release year to search for</span></span>
<span><span class="co">#' @param plot String defining whether "short" or "full" plot is returned</span></span>
<span><span class="co">#' @param format String defining return format. One of "json" or "xml"</span></span>
<span><span class="co">#' @param api_key String defining your OMDb API key.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return String giving a OMBD search request URL</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @examples </span></span>
<span><span class="co">#' omdb_url("mean+girls", "2004", "short", "json", getOption(OMBD_API_Key))</span></span>
<span><span class="co">#' </span></span>
<span><span class="va">omdb_url</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">title</span>, <span class="va">year</span>, <span class="va">plot</span>, <span class="va">format</span>, <span class="va">api_key</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"http://www.omdbapi.com/?t={title}&amp;y={year}&amp;plot={plot}&amp;r={format}&amp;apikey={api_key}"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Running the example we get:</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mean_girls_request</span> <span class="op">&lt;-</span> <span class="fu">omdb_url</span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"mean+girls"</span>,</span>
<span>  year <span class="op">=</span>  <span class="st">"2004"</span>,</span>
<span>  plot <span class="op">=</span> <span class="st">"short"</span>,</span>
<span>  format <span class="op">=</span>  <span class="st">"json"</span>,</span>
<span>  api_key <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">"OMDB_API_Key"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can then use the <a href="https://httr.r-lib.org/">httr</a> package to construct our request and store the response we get.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">response</span> <span class="op">&lt;-</span> <span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/GET.html">GET</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">mean_girls_request</span><span class="op">)</span></span>
<span><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/status_code.html">status_code</a></span><span class="op">(</span><span class="va">response</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 200</span></span></code></pre></div>
<p>Thankfully it was a success! If you get a 401 error code here, check that you have clicked the activation link for your API key.</p>
<p>The full structure of the response is quite complicated, but we can easily extract the requested data using <code>content()</code></p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/content.html">content</a></span><span class="op">(</span><span class="va">response</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Title</span></span>
<span><span class="co">#&gt; [1] "Mean Girls"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Year</span></span>
<span><span class="co">#&gt; [1] "2004"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Rated</span></span>
<span><span class="co">#&gt; [1] "PG-13"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Released</span></span>
<span><span class="co">#&gt; [1] "30 Apr 2004"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Runtime</span></span>
<span><span class="co">#&gt; [1] "97 min"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Genre</span></span>
<span><span class="co">#&gt; [1] "Comedy"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Director</span></span>
<span><span class="co">#&gt; [1] "Mark Waters"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Writer</span></span>
<span><span class="co">#&gt; [1] "Rosalind Wiseman, Tina Fey"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Actors</span></span>
<span><span class="co">#&gt; [1] "Lindsay Lohan, Jonathan Bennett, Rachel McAdams"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Plot</span></span>
<span><span class="co">#&gt; [1] "Cady Heron is a hit with The Plastics, the A-list girl clique at her new school, until she makes the mistake of falling for Aaron Samuels, the ex-boyfriend of alpha Plastic Regina George."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Language</span></span>
<span><span class="co">#&gt; [1] "English, German, Vietnamese, Swahili"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Country</span></span>
<span><span class="co">#&gt; [1] "United States, Canada"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Awards</span></span>
<span><span class="co">#&gt; [1] "7 wins &amp; 25 nominations"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Poster</span></span>
<span><span class="co">#&gt; [1] "https://m.media-amazon.com/images/M/MV5BMjE1MDQ4MjI1OV5BMl5BanBnXkFtZTcwNzcwODAzMw@@._V1_SX300.jpg"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Ratings</span></span>
<span><span class="co">#&gt; $Ratings[[1]]</span></span>
<span><span class="co">#&gt; $Ratings[[1]]$Source</span></span>
<span><span class="co">#&gt; [1] "Internet Movie Database"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Ratings[[1]]$Value</span></span>
<span><span class="co">#&gt; [1] "7.1/10"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Ratings[[2]]</span></span>
<span><span class="co">#&gt; $Ratings[[2]]$Source</span></span>
<span><span class="co">#&gt; [1] "Rotten Tomatoes"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Ratings[[2]]$Value</span></span>
<span><span class="co">#&gt; [1] "84%"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Ratings[[3]]</span></span>
<span><span class="co">#&gt; $Ratings[[3]]$Source</span></span>
<span><span class="co">#&gt; [1] "Metacritic"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Ratings[[3]]$Value</span></span>
<span><span class="co">#&gt; [1] "66/100"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Metascore</span></span>
<span><span class="co">#&gt; [1] "66"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $imdbRating</span></span>
<span><span class="co">#&gt; [1] "7.1"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $imdbVotes</span></span>
<span><span class="co">#&gt; [1] "385,107"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $imdbID</span></span>
<span><span class="co">#&gt; [1] "tt0377092"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Type</span></span>
<span><span class="co">#&gt; [1] "movie"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $DVD</span></span>
<span><span class="co">#&gt; [1] "21 Sep 2004"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $BoxOffice</span></span>
<span><span class="co">#&gt; [1] "$86,058,055"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Production</span></span>
<span><span class="co">#&gt; [1] "N/A"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Website</span></span>
<span><span class="co">#&gt; [1] "N/A"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Response</span></span>
<span><span class="co">#&gt; [1] "True"</span></span></code></pre></div>
</div>
<div id="wrapping-up-2" class="section level2" number="7.11">
<h2>
<span class="header-section-number">7.11</span> Wrapping up<a class="anchor" aria-label="anchor" href="#wrapping-up-2"><i class="fas fa-link"></i></a>
</h2>
<p>We have learned a bit more about how the internet works, the benefits of using an API to share data and how to request data from Open APIs.</p>
<p>When obtaining data from the internet it’s vital that you keep your credentials safe, and that don’t do more work than is needed.</p>
<ul>
<li><p>Keep your API keys out of your code. Store them in your <code>.Rprofile</code> (and make sure this is not under version control!)</p></li>
<li><p>Scraping is always a last resort. Is there an API already?</p></li>
<li><p>Writing your own code to access an API can be more painful than necessary.</p></li>
<li><p>Don’t repeat other people, if a suitable wrapper exists then use it.</p></li>
</ul>
<!-- Aim to include for for 2023/24 course delivery --><!-- # SQL {#data-sql}


::: {.rmdimportant} 
Effective Data Science is still a work-in-progress. This chapter is currently a dumping ground for ideas, and we don't recommend reading it. 

If you would like to contribute to the development of EDS, you may do so at <https://github.com/zakvarty/data_science_notes>.
:::

(Content to be added for AY 2023-24)

## Databases and SQL

- Structure of a webpage. Web Scraping as a source of data
- APIs as a source of data, data files beyond csv.
- Data bases and SQL 

- Data will not always be in a nicely formatted csv 

- Beginner: reading from clipboard and googlesheets 
- Intermediate: reading messy csvs and making your workflow robust to new versions
- Advanced: 
  - Webscraping and APIs as data sources, data files beyond CSV
  - data files beyond csv, benefits and drawbacks: JSON, xml, parquet, .Rdata, .pkl 
  - Data bases as data sources: Basic SQL verbs
  - Learning SQL theory on a small scale: dplyr verbs 
  
  -->
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-webscraping.html"><span class="header-section-number">6</span> Web Scraping</a></div>
<div class="next"><a href="data-checklist.html">Checklist</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-apis"><span class="header-section-number">7</span> APIs</a></li>
<li><a class="nav-link" href="#aquiring-data-via-an-api"><span class="header-section-number">7.1</span> Aquiring Data Via an API</a></li>
<li><a class="nav-link" href="#why-do-i-need-to-know-about-apis"><span class="header-section-number">7.2</span> Why do I need to know about APIs?</a></li>
<li><a class="nav-link" href="#what-is-an-api"><span class="header-section-number">7.3</span> What is an API?</a></li>
<li><a class="nav-link" href="#http"><span class="header-section-number">7.4</span> HTTP</a></li>
<li>
<a class="nav-link" href="#http-requests"><span class="header-section-number">7.5</span> HTTP Requests</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#url"><span class="header-section-number">7.5.1</span> URL</a></li>
<li><a class="nav-link" href="#method"><span class="header-section-number">7.5.2</span> Method</a></li>
<li><a class="nav-link" href="#header"><span class="header-section-number">7.5.3</span> Header</a></li>
<li><a class="nav-link" href="#body"><span class="header-section-number">7.5.4</span> Body</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#http-responses"><span class="header-section-number">7.6</span> HTTP Responses</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#status-codes"><span class="header-section-number">7.6.1</span> Status Codes</a></li></ul>
</li>
<li>
<a class="nav-link" href="#authentication"><span class="header-section-number">7.7</span> Authentication</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#basic-authentication"><span class="header-section-number">7.7.1</span> Basic Authentication</a></li>
<li><a class="nav-link" href="#api-key-authentication"><span class="header-section-number">7.7.2</span> API Key Authentication</a></li>
</ul>
</li>
<li><a class="nav-link" href="#api-wrappers"><span class="header-section-number">7.8</span> API wrappers</a></li>
<li>
<a class="nav-link" href="#geonames-wrapper"><span class="header-section-number">7.9</span> {geonames} wrapper</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#set-up"><span class="header-section-number">7.9.1</span> Set up</a></li>
<li><a class="nav-link" href="#keep-it-secret-keep-it-safe"><span class="header-section-number">7.9.2</span> Keep it Secret, Keep it Safe</a></li>
<li><a class="nav-link" href="#using-geonames"><span class="header-section-number">7.9.3</span> Using {geonames}</a></li>
</ul>
</li>
<li><a class="nav-link" href="#what-if-there-is-no-wrapper"><span class="header-section-number">7.10</span> What if there is no wrapper?</a></li>
<li><a class="nav-link" href="#wrapping-up-2"><span class="header-section-number">7.11</span> Wrapping up</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/zakvarty/data_science_notes//blob/master/203-data-apis.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/zakvarty/data_science_notes//edit/master/203-data-apis.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Effective Data Science</strong>" was written by Zak Varty. It was last built on 2023-01-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
