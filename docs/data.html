<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Aquiring and Sharing Data | Effective Data Science</title>
<meta name="author" content="Zak Varty">
<meta name="description" content="Data can be difficult to acquire and gnarly when you get it.  2.1 Reading Tabular Data  2.1.1 Excel is not the only file type (Img: Oranges are not the only fruit book cover) Other data seen...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 2 Aquiring and Sharing Data | Effective Data Science">
<meta property="og:type" content="book">
<meta property="og:url" content="https://eds-book.zakvarty.com/data.html">
<meta property="og:image" content="https://eds-book.zakvarty.com/images/EDS-logo.jpg">
<meta property="og:description" content="Data can be difficult to acquire and gnarly when you get it.  2.1 Reading Tabular Data  2.1.1 Excel is not the only file type (Img: Oranges are not the only fruit book cover) Other data seen...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Aquiring and Sharing Data | Effective Data Science">
<meta name="twitter:description" content="Data can be difficult to acquire and gnarly when you get it.  2.1 Reading Tabular Data  2.1.1 Excel is not the only file type (Img: Oranges are not the only fruit book cover) Other data seen...">
<meta name="twitter:image" content="https://eds-book.zakvarty.com/images/EDS-logo.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Effective Data Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="intro.html">Introduction</a></li>
<li><a class="" href="workflows.html"><span class="header-section-number">1</span> Data Science Workflows</a></li>
<li><a class="active" href="data.html"><span class="header-section-number">2</span> Aquiring and Sharing Data</a></li>
<li><a class="" href="edav.html"><span class="header-section-number">3</span> Cleaning, Exploring and Visualising</a></li>
<li><a class="" href="production.html"><span class="header-section-number">4</span> Getting Your Work into Production</a></li>
<li><a class="" href="context.html"><span class="header-section-number">5</span> Wider Context and Ethics</a></li>
<li><a class="" href="reading-list.html"><span class="header-section-number">6</span> Reading List</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/zakvarty/data_science_notes/">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Aquiring and Sharing Data<a class="anchor" aria-label="anchor" href="#data"><i class="fas fa-link"></i></a>
</h1>
<p><em>Data can be difficult to acquire and gnarly when you get it.</em></p>
<div id="reading-tabular-data" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Reading Tabular Data<a class="anchor" aria-label="anchor" href="#reading-tabular-data"><i class="fas fa-link"></i></a>
</h2>
<div id="excel-is-not-the-only-file-type" class="section level3" number="2.1.1">
<h3>
<span class="header-section-number">2.1.1</span> Excel is not the only file type<a class="anchor" aria-label="anchor" href="#excel-is-not-the-only-file-type"><i class="fas fa-link"></i></a>
</h3>
<p>(Img: Oranges are not the only fruit book cover)</p>
<p>Other data seen already:
tabular data: csv, tsv
list-like data: JSON, XML</p>
</div>
<div id="reading-in-tabular-data" class="section level3" number="2.1.2">
<h3>
<span class="header-section-number">2.1.2</span> Reading in tabular data<a class="anchor" aria-label="anchor" href="#reading-in-tabular-data"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> is the base R function to load a csv file into memory.</p>
<p>Whirlwind tour of reading in other file formats.</p>
<p><code>.r readr::read_csv(file = "path/to/file.csv")</code>
<code>.r readr::read_tsv(file = "path/to/file.tsv")</code>
<code>.r readr::read_delim(file = "path/to/file.txt", sep =" ")</code></p>
<p>When csvs are read in using <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> the tabular data is created as a <code>data.frame</code> in R.</p>
<p>This is not ideal for several reasons:</p>
<p><strong>Pretty printing:</strong> print method for tibbles has highlighting and defaults to only the first 10 rows, and all the columns that fit on screen. In addition to its name, each column reports its type.</p>
<p>This limited printing is designed so that you don’t accidentally overwhelm your console when you print large data frames. You can override the default printing behaviour by specifying the number of rows <code>n</code> and number of columns <code>width</code> that you would like to print as part of the function call.</p>
<p><strong>Type stability:</strong> When you subset a <code>data.frame</code>, the <em>type</em> of object you get back depends on what you ask for. This can lead to forgotten edge cases when writing functions that work with or create data frames.</p>
<pre><code>set.seed(1234)
example_data_frame &lt;- data.frame(
  gaussian = rnorm(10), 
  uniform = runif(10), 
  gamma = rgamma(10,1,1))

set.seed(1234)
example_tibble &lt;- tibble::tibble(
  gaussian = rnorm(10),
  uniform = runif(10),
  gamma = rgamma(10,1,1))</code></pre>
<p>An extracted row is still a <code>data.frame</code>:
<code>print(example_data_frame[1,])</code>
<code>class(example_data_frame[1,])</code></p>
<p>But an extracted column is a vector:
<code>print(example_data_frame[,1])</code>
<code>class(example_data_frame[,1])</code></p>
<p>Similar bugs can be introduced through data frames allowing <em>partial matching</em>: if column names are used for subsetting then partially matched strings will quietly continue to function until you add another column that breaks this partial match.</p>
<pre><code>example_data_frame$uniform
example_data_frame$u
example_data_frame[["u"]]

example_data_frame$gaussian
example_data_frame$gaus
example_data_frame$g          # returns NULL b/c of name conflict

example_tibble$g              # returns NULL and a warning message</code></pre>
<p><strong>Reproducibility:</strong> Base R functions inherit some behaviour from your operating system and environment variables, so import code that works on your computer might not work on someone else’s</p>
<pre><code>nycflights13::flights %&gt;% 
  print(n = 10, width = Inf)</code></pre>
<ul>
<li><code>stringsAsFactors = FALSE</code></li>
<li>
<li>
</ul>
</div>
</div>
<div id="webscraping-and-apis" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Webscraping and APIs<a class="anchor" aria-label="anchor" href="#webscraping-and-apis"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="databases-and-sql" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Databases and SQL<a class="anchor" aria-label="anchor" href="#databases-and-sql"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>Structure of a webpage. Web Scraping as a source of data</p></li>
<li><p>APIs as a source of data, data files beyond csv.</p></li>
<li><p>Data bases and SQL</p></li>
<li><p>Data will not always be in a nicely formatted csv</p></li>
<li><p>Beginner: reading from clipboard and googlesheets</p></li>
<li><p>Intermediate: reading messy csvs and making your workflow robust to new versions</p></li>
<li>
<p>Advanced:</p>
<ul>
<li>Webscraping and APIs as data sources, data files beyond CSV</li>
<li>data files beyond csv, benefits and drawbacks: JSON, xml, parquet, .Rdata, .pkl</li>
<li>Data bases as data sources: Basic SQL verbs</li>
<li>Learning SQL theory on a small scale: dplyr verbs</li>
</ul>
</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="workflows.html"><span class="header-section-number">1</span> Data Science Workflows</a></div>
<div class="next"><a href="edav.html"><span class="header-section-number">3</span> Cleaning, Exploring and Visualising</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data"><span class="header-section-number">2</span> Aquiring and Sharing Data</a></li>
<li>
<a class="nav-link" href="#reading-tabular-data"><span class="header-section-number">2.1</span> Reading Tabular Data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#excel-is-not-the-only-file-type"><span class="header-section-number">2.1.1</span> Excel is not the only file type</a></li>
<li><a class="nav-link" href="#reading-in-tabular-data"><span class="header-section-number">2.1.2</span> Reading in tabular data</a></li>
</ul>
</li>
<li><a class="nav-link" href="#webscraping-and-apis"><span class="header-section-number">2.2</span> Webscraping and APIs</a></li>
<li><a class="nav-link" href="#databases-and-sql"><span class="header-section-number">2.3</span> Databases and SQL</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/zakvarty/data_science_notes//blob/master/02-data.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/zakvarty/data_science_notes//edit/master/02-data.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Effective Data Science</strong>" was written by Zak Varty. It was last built on 2022-12-10.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
